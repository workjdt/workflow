import{e as v,m as M,c as n,p as E,a as s,d as y,F as u,r as c,w as p,v as g,q as A,g as b,s as x,o as a,t as d,i as H,u as q}from"./index-DBQK3Clt.js";const z={class:"relative"},J=["src"],K={class:"bg-slate-100 min-h-screen w-full"},G={class:"max-w-6xl mx-auto px-6 py-8 space-y-10"},Q={class:"bg-white rounded-xl shadow p-6"},X={id:"adminDashboard",class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Y={class:"bg-white p-4 rounded shadow"},Z={class:"text-sm text-gray-500"},ee={class:"text-2xl font-bold text-sky800"},te={id:"departmentNav",class:"flex bg-sky-100 border-b px-6 py-3 flex flex-col items-center gap-3"},se={id:"deptButtons",class:"flex gap-2 overflow-x-auto"},le=["onClick"],oe={class:"bg-white rounded-xl shadow p-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae=["value"],re=["value"],ie={class:"mt-6"},de={class:"flex gap-2 mt-3 flex-wrap"},ue=["src"],pe=["onClick"],me={class:"bg-white rounded-xl shadow p-6"},ve={id:"list",class:"grid gap-6"},ce={class:"bg-sky100 border-l-4 border-sky800 rounded-lg shadow p-5"},ge={class:"mb-2 font-semibold text-sky800 text-lg"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},ke={class:"flex flex-col gap-2"},we={class:"flex"},be={class:"flex"},he={class:"flex"},ye={class:"md:col-span-2"},xe={key:0},_e=["href"],Te={class:"flex gap-2 mt-3 flex-wrap"},Ae=["src","onClick"],Ce={key:0,class:"flex gap-2 mt-3"},Se=["onClick"],Le=["onClick"],C="workflows",We={__name:"Admin",setup(Ve){const S=localStorage.getItem("UserRole").toLowerCase(),o=v({department:"",name:"",identification:"",folder:"",summary:"",kpi:"",splink:"",spname:"",images:[]}),L={department:"",name:"",identification:"",folder:"",summary:"",kpi:"",splink:"",spname:"",images:[]},_=v({departments:[{description:"HR",val:"HR"},{description:"IT",val:"IT"},{description:"Finance",val:"Finance"},{description:"Operations",val:"Operations"}],kpilist:{HR:[{description:"Approval Time – 30 mins",val:"Approval Time – 30 mins"},{description:"Approval Time – 45 mins",val:"Approval Time – 45 mins"},{description:"Approval Time – 60 mins",val:"Approval Time – 60 mins"}],IT:[{description:"Approval Time – 30 mins",val:"Approval Time – 30 mins"},{description:"Approval Time – 45 mins",val:"Approval Time – 45 mins"},{description:"Approval Time – 60 mins",val:"Approval Time – 60 mins"}],Finance:[{description:"Approval Time – 30 mins",val:"Approval Time – 30 mins"},{description:"Approval Time – 45 mins",val:"Approval Time – 45 mins"},{description:"Approval Time – 60 mins",val:"Approval Time – 60 mins"}],Operations:[{description:"Approval Time – 30 mins",val:"Approval Time – 30 mins"},{description:"Approval Time – 45 mins",val:"Approval Time – 45 mins"},{description:"Approval Time – 60 mins",val:"Approval Time – 60 mins"}]}}),r=v(JSON.parse(localStorage.getItem(C))??[]),V=x(()=>["All",...new Set(r.value.map(l=>l.department))]),f=v(),m=v(),D=x(()=>!f.value||f.value=="All"||m.value==""?r.value:r.value.filter(l=>l.department===f.value).filter(l=>!m.value||l.name?.toLowerCase().includes(m.value.toLowerCase())||l.identification?.toLowerCase().includes(m.value.toLowerCase())||l.summary?.toLowerCase().includes(m.value.toLowerCase())||l.folder?.toLowerCase().includes(m.value.toLowerCase()))),k=v(null),I=()=>{const l={...L};for(const e of Object.keys(l))o.value.hasOwnProperty(e)&&(o.value[e]=l[e])},W=x(()=>{const l=[];l.push({title:"Total Workflows",count:r.value.length});for(const e of new Set(r.value.map(t=>t.department)))l.push({title:`${e} Workflows`,count:r.value.filter(t=>t.department==e).length});return l}),F=()=>{const l={department:"Department",name:"Task Name"},e=[];for(const t of Object.keys(l))o.value[t]||e.push(`${l[t]} should not be empty to proceed`);return e},N=()=>{const l=F();if(l.length>0){alert(l[0]);return}const e={...o.value,updated:new Date().toLocaleString()};if(k.value===null)r.value.push(e);else{const t=r.value[k.value];if(!confirm(`update this workflow ${t.name} ? `))return;r.value[k.value]=e}k.value=null,I()},U=(l,e)=>{for(const t of Object.keys(o.value))l.hasOwnProperty(t)&&(o.value[t]=l[t]);k.value=e},O=l=>{const e=r.value[l]?.name;confirm(`Delete this workflow ${e} ? `)&&r.value.splice(l,1)},P=l=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsDataURL(l)}),$=async l=>{const e=Array.from(l.target.files);if(e.length){for(const t of e){if(!t.type.startsWith("image/"))continue;const i=await P(t);o.value.images.push(i)}l.target.value=""}},R=l=>{confirm("Remove this image?")&&o.value.images.splice(l,1)};M(()=>r,(l,e)=>{localStorage.setItem(C,JSON.stringify(r.value))},{deep:!0});const h=v(null),j=l=>{h.value=l},T=()=>{h.value=null};return(l,e)=>(a(),n(u,null,[h.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-white bg-opacity-20 flex items-center justify-center z-50",onClick:E(T,["self"])},[s("div",z,[s("img",{src:h.value,class:"max-w-[90vw] max-h-[90vh] rounded shadow-lg"},null,8,J),s("button",{onClick:T,class:"absolute top-2 right-2 text-white bg-red-600 px-2 py-1 rounded hover:bg-red-700"}," × ")])])):y("",!0),s("div",K,[s("div",G,[s("section",Q,[e[10]||(e[10]=s("h2",{class:"text-lg font-semibold text-sky-800 mb-4"},"Admin Dashboard",-1)),s("div",X,[(a(!0),n(u,null,c(W.value,t=>(a(),n("div",Y,[s("div",Z,d(t.title),1),s("div",ee,d(t.count),1)]))),256))])]),s("nav",te,[p(s("input",{id:"searchInput","onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),placeholder:"Search workflows...",class:"p-2 border rounded w-full md:w-1/3 text-center"},null,512),[[g,m.value]]),s("div",se,[(a(!0),n(u,null,c(V.value,t=>(a(),n("button",{class:H(["px-4 py-1 rounded-full",f.value==t?"bg-sky-800 text-white":"bg-gray-200"]),onClick:i=>f.value=t},d(t),11,le))),256))])]),s("section",oe,[e[14]||(e[14]=s("h2",{class:"text-lg font-semibold text-sky-800 mb-6"},"Workflow Management",-1)),s("div",ne,[p(s("select",{class:"p-2 border rounded","onUpdate:modelValue":e[1]||(e[1]=t=>o.value.department=t),onChange:e[2]||(e[2]=t=>o.value.kpi="")},[e[11]||(e[11]=s("option",{value:"",disabled:""},"Select Department",-1)),(a(!0),n(u,null,c(_.value.departments,t=>(a(),n("option",{key:t.val,value:t.val},d(t.description),9,ae))),128))],544),[[A,o.value.department]]),p(s("input",{placeholder:"Task Name",class:"p-2 border rounded bg-sky-50","onUpdate:modelValue":e[3]||(e[3]=t=>o.value.name=t)},null,512),[[g,o.value.name]]),p(s("input",{placeholder:"Task Identification",class:"p-2 border rounded bg-sky-50","onUpdate:modelValue":e[4]||(e[4]=t=>o.value.identification=t)},null,512),[[g,o.value.identification]]),p(s("input",{placeholder:"Folder Name",class:"p-2 border rounded bg-sky-50","onUpdate:modelValue":e[5]||(e[5]=t=>o.value.folder=t)},null,512),[[g,o.value.folder]]),p(s("textarea",{placeholder:"Summary Description",class:"p-2 border rounded md:col-span-2 bg-sky-50",rows:"3","onUpdate:modelValue":e[6]||(e[6]=t=>o.value.summary=t)},null,512),[[g,o.value.summary]]),p(s("select",{class:"p-2 border rounded md:col-span-2 bg-sky-50","onUpdate:modelValue":e[7]||(e[7]=t=>o.value.kpi=t)},[e[12]||(e[12]=s("option",{value:""},"Select KPI",-1)),(a(!0),n(u,null,c(_.value.kpilist[o.value.department]||[],t=>(a(),n("option",{key:t.val,value:t.val},d(t.description),9,re))),128))],512),[[A,o.value.kpi]]),p(s("input",{placeholder:"SharePoint Sample Link",class:"p-2 border rounded bg-sky-50","onUpdate:modelValue":e[8]||(e[8]=t=>o.value.splink=t)},null,512),[[g,o.value.splink]]),p(s("input",{placeholder:"SharePoint Link Name",class:"p-2 border rounded bg-sky-50","onUpdate:modelValue":e[9]||(e[9]=t=>o.value.spname=t)},null,512),[[g,o.value.spname]])]),s("div",ie,[e[13]||(e[13]=s("label",{class:"block text-sm text-gray-600 mb-1"}," Attach Image ",-1)),s("input",{type:"file",accept:"image/*",multiple:"",onChange:$},null,32)]),s("div",de,[(a(!0),n(u,null,c(o.value.images,(t,i)=>(a(),n("div",{key:i,class:"relative"},[(a(),n("img",{key:i,src:t,class:"w-24 h-24 object-cover rounded border"},null,8,ue)),s("button",{onClick:w=>R(i),class:"absolute top-0 right-0 bg-red-600 text-white text-xs px-1 rounded-full hover:bg-red-700",title:"Remove Image"}," × ",8,pe)]))),128))]),s("div",{class:"mt-6 text-right"},[s("button",{onClick:N,class:"bg-sky-800 hover:bg-sky-900 text-white px-6 py-2 rounded"}," Save Workflow ")])]),s("section",me,[e[21]||(e[21]=s("h2",{class:"text-lg font-semibold text-sky-800 mb-4"},"Workflows",-1)),s("div",ve,[r.value.length==0?(a(),n(u,{key:0},[b(" No Work List Found ")],64)):y("",!0),(a(!0),n(u,null,c(D.value,(t,i)=>(a(),n(u,null,[s("div",ce,[s("div",ge,d(),1),s("div",fe,[s("div",null,[e[15]||(e[15]=s("strong",null,"Department:",-1)),b(" "+d(t.department),1)]),s("div",null,[e[16]||(e[16]=s("strong",null,"Updated:",-1)),b(" "+d(t.updated),1)]),s("div",ke,[e[17]||(e[17]=s("strong",null,"Workflow Steps:",-1)),s("div",we,"Task Name: "+d(t.name),1),s("div",be,"Task Identification: "+d(t.identification),1),s("div",he,"Folder Name: "+d(t.folder),1)]),s("div",ye,[e[18]||(e[18]=s("strong",null,"Summary:",-1)),b(" "+d(t.summary),1)]),s("div",null,[s("strong",null,"KPI: "+d(t.kpi),1)]),t.splink?(a(),n("div",xe,[e[19]||(e[19]=s("strong",null,"SharePoint:",-1)),s("a",{href:t.splink,target:"_blank",class:"text-sky800 underline"},d(t.spname),9,_e)])):y("",!0),s("div",Te,[(a(!0),n(u,null,c(t.images,(w,B)=>(a(),n("img",{key:B,src:w,class:"w-24 h-24 object-cover rounded border",onClick:De=>j(w)},null,8,Ae))),128))])]),q(S)=="admin"?(a(),n("div",Ce,[s("button",{onClick:w=>U(t,i),class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded"}," Edit",8,Se),s("button",{onClick:w=>O(i),class:"bg-red-100 text-red-700 px-3 py-1 rounded"}," Delete ",8,Le)])):y("",!0)]),e[20]||(e[20]=b(" ` ",-1))],64))),256))])])])])],64))}};export{We as default};
